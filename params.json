{"name":"Fedora-Repository","tagline":"Process to build an Islandora ready fedora commons server on a CentOS 7 host. ","body":"# fedora-repository\r\nProcess to build an Islandora ready (not included) fedora commons server on a CentOS 7 host.\r\n\r\n### Welcome to the Fedora Repository Server Installer.\r\nThis project is for installing [fedora commons](http://fedora-commons.org) on a CentOS 7 based server that's configured ready to be used with any web based site (not included in installation). It's specifically designed and tested to be used with a Drupal based Islandora installation although, Islandora isn't a requirement. Other web front ends that can interface with a fedora based server could work. \r\n\r\n### What's installed\r\n\r\n#### Fedora Commons 3.8.1\r\n\r\nFedora Commons is the database server for managing Digital Collections. While you can browse objects directly within Fedora it's generally used for a backend storage configured against a web front end for presenting the objects (ie. Drupal and Islandora.)\r\n\r\n#### Solr 4.2.2\r\n\r\nSolr is the indexing service that's installed with Fedora Commons to be able to index objects in a collection and present those results when asked for in database searches. \r\n\r\n#### Fedora GSearch 2.6\r\n\r\nFedora Gsearch is another aspect of the fedora server that provides an interface to allow one to search through a fedora database. It works with solr to produce indexed lists of digital objects that are searched. \r\n\r\n#### Adore Djatoka 1.1\r\n\r\ndjatoka is open source Java software that builds upon a rich set of APIs and libraries to provide a service framework for the dynamic dissemination of JPEG 2000 image files. (http://sourceforge.net/projects/djatoka/)\r\n\r\n#### MySQL 5\r\n\r\n\" MySQL is a freely available open source Relational Database Management System (RDBMS) that uses Structured Query Language (SQL). SQL is the most popular language for adding, accessing and managing content in a database. It is most noted for its quick processing, proven reliability, ease and flexibility of use.\" (Google Search)\r\n\r\n#### Apache 2\r\n\r\n Apache is a freely available Web server that is distributed under an \"open source\" license. Version 2.0 runs on most UNIX-based operating systems (such as Linux, Solaris, Digital UNIX, and AIX), on other UNIX/POSIX-derived systems (such as Rhapsody, BeOS, and BS2000/OSD), on AmigaOS, and on Windows 2000. (Google Search)\r\n\r\n#### Saxon 9.5\r\n\r\nThe Saxon package is a collection of tools for processing XML documents. \r\nhttp://sourceforge.net/projects/saxon/\r\n\r\n### How to Get it\r\n\r\nJust go to the \"View on github\" link and browse the README.md for more information on how to use it. \r\n\r\nThe installation process is fairly simple. \r\n\r\nRequirements:\r\n   - CentOS 7 based machine (minimal install is sufficient). \r\n \r\n\r\nNotes: \r\n   - an /opt/fedora-repository directory will be created as the installation base.\r\n   - generates the user accounts and creates strong random passwords for the accounts which is emailed to the admin at the end. \r\n\r\n<h1>Installation (quick):</h1>\r\n\r\nIn order to simplify the installation process we created an init.d service that you can load on the machine to do the installation for you. \r\n\r\nThis automates the manual installation process that is shown further below.\r\n\r\n\t% cd /etc/init.d\r\n\t% wget https://raw.githubusercontent.com/dhinitiative/fedora-repository/master/etc/repository-installer-init-d\r\n\t\t\r\nmodify the repository-installer-init-d script for your email address for root's mail and to notify you:\r\n\t\r\nedit the line: \r\n\r\n\tsed -i \"s|youremail@domain.com|<REPLACE WITH YOUR EMAIL>|g\" /opt/fedora-repository/installer.sh\r\n\t\t\t\r\nchange the <REPLACE WITH YOUR EMAIL> to your real email address or the address where all mail for the box should go.\r\nit should read something like this:\r\n\t\t\t\r\n\tsed -i \"s|youremail@domain.com|dhiemail@dhinitiative.org|g\" /opt/fedora-repository/installer.sh\r\n\t\t\t\t\r\nThen run the following commands:\r\n    \t\t\t\r\n    % mv repository-installer-init-d repository-installer\r\n    % chmod 755 /etc/init.d/repository-installer\r\n    % chkconfig --add repository-installer\r\n  \r\nNow you have a repository-installer service on the machine.\r\n   \r\n   \t[root@host ~]# chkconfig --list | grep repository-installer\r\n\r\n\tNote: This output shows SysV services only and does not include native\r\n\tsystemd services. SysV configuration data might be overridden by native\r\n\tsystemd configuration.\r\n\t\t\t\r\n\tIf you want to list systemd services use 'systemctl list-unit-files'.\r\n\tTo see services enabled on particular target use\r\n\t'systemctl list-dependencies [target]'.\r\n\r\n\trepository-installer\t0:off\t1:off\t2:off\t3:off\t4:off\t5:off\t6:off\r\n\t[root@host ~]# \r\n\r\nIf it's off turn it on with ( chkconfig repository-installer on ) alternatively to turn it off ( chkconfig repository-installer off )\r\n\r\nBy enabling this service it will automatically build the fedora server the next reboot. So reboot your machine and sit back and wait up to an hour for the installation to complete. At the end of the process all the login details will be emailed to the root account specified in the instructions above. Also note that it WILL NOT build over an already installed server. If the installation detects /opt/feodra-repository it stops the install and disables the service so it won't keep running on reboots. \r\n\r\n\r\n\r\nOn a production server you should remove the installer service. \r\n\r\n\t% rm /etc/init.d/repository-installer\r\n\r\n\r\n\r\n\tThat's it!\r\n\r\nYou can also log back in after the reboot and do:\r\n\r\n\t% tail -f /opt/fedora-repository/installation.log \r\n\r\nYou can watch the install process as it works along building the installation. \r\n\r\n<h1>Installation (manually):</h1>\r\n\r\n    Install needed software:\r\n        % yum -y install git gettext sendmail\r\n        \r\n    Create the installation directory:\r\n    \r\n       % mkdir /opt\r\n       % cd /opt\r\n       \r\n    Get the installation software:\r\n  \r\n       % git clone https://github.com/dhinitiative/fedora-repository.git\r\n\r\n    Configure the installation:\r\n    \r\n      % cd /opt/fedora-repository\r\n      \r\n      edit the file installer.sh and modify the values to suit your environment, modify the following:\r\n      \r\n      export ADMIN_EMAIL='youremail@domain.com' \r\n      export FEDORA_USER_PASS='fedora2014'\r\n      export ROOT_MYSQL_PASS='mysqlroot' \r\n      export FEDORA_DB_NAME=\"fedora3\"        \t\t            # Name of fedora MySQL database -> fedora3 is recommended\r\n      export FEDORA_DB_USER=\"fedoradb\"        \t\t        # Fedora db username -> for fedora.fcfg file\r\n      export FEDORA_DB_PASS='fedoradbpass'        \t        # Fedora db password -> for fedora.fcfg file\r\n      export FEDORA_ADMIN_USER=\"fedoraAdmin\"                  # Username for http://localhost:8080/fedora/admin\r\n      export FEDORA_ADMIN_PASS='fedoraadminpass'              # Password for http://localhost:8080/fedora/admin\r\n      export FEDORA_GSEARCH_ADMIN_USER=\"fgsAdmin\"             # Username for http://localhost:8080/fedoragsearch\r\n      export FEDORA_GSEARCH_ADMIN_PASS='fgsadminpass'  \r\n      \r\n     \r\n     \r\n    Execute the installation:\r\n      % chmod 755 installer.sh\r\n      % ./installer.sh >/opt/fedora-repository/installation.log 2>&1 &\r\n      \r\n  Note: run the command:\r\n\r\n    % tail -f /opt/fedora-repository/installation.log \r\n\r\n  To watch the install process as it works along building the installation. \r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}