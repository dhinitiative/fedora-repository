<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Fedora-repository by dhinitiative</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Fedora-repository</h1>
      <h2 class="project-tagline">Process to build an Islandora ready (not included) fedora commons server on a CentOS 7 host. </h2>
      <a href="https://github.com/dhinitiative/fedora-repository" class="btn">View on GitHub</a>
      <a href="https://github.com/dhinitiative/fedora-repository/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/dhinitiative/fedora-repository/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="fedora-repository" class="anchor" href="#fedora-repository" aria-hidden="true"><span class="octicon octicon-link"></span></a>fedora-repository</h1>

<p>Process to build an Islandora ready (not included) fedora commons server on a CentOS 7 host.</p>

<h3>
<a id="welcome-to-the-fedora-repository-server-installer" class="anchor" href="#welcome-to-the-fedora-repository-server-installer" aria-hidden="true"><span class="octicon octicon-link"></span></a>Welcome to the Fedora Repository Server Installer.</h3>

<p>This project is for installing <a href="http://fedora-commons.org">fedora commons</a> on a CentOS 7 based server that's configured ready to be used with any web based site (not included in installation). It's specifically designed and tested to be used with a Drupal based Islandora installation although, Islandora isn't a requirement. Other web front ends that can interface with a fedora based server could work. </p>

<h3>
<a id="whats-installed" class="anchor" href="#whats-installed" aria-hidden="true"><span class="octicon octicon-link"></span></a>What's installed</h3>

<h4>
<a id="fedora-commons-381" class="anchor" href="#fedora-commons-381" aria-hidden="true"><span class="octicon octicon-link"></span></a>Fedora Commons 3.8.1</h4>

<p>Fedora Commons is the database server for managing Digital Collections. While you can browse objects directly within Fedora it's generally used for a backend storage configured against a web front end for presenting the objects (ie. Drupal and Islandora.)</p>

<h4>
<a id="solr-422" class="anchor" href="#solr-422" aria-hidden="true"><span class="octicon octicon-link"></span></a>Solr 4.2.2</h4>

<p>Solr is the indexing service that's installed with Fedora Commons to be able to index objects in a collection and present those results when asked for in database searches. </p>

<h4>
<a id="fedora-gsearch-26" class="anchor" href="#fedora-gsearch-26" aria-hidden="true"><span class="octicon octicon-link"></span></a>Fedora GSearch 2.6</h4>

<p>Fedora Gsearch is another aspect of the fedora server that provides an interface to allow one to search through a fedora database. It works with solr to produce indexed lists of digital objects that are searched. </p>

<h4>
<a id="adore-djatoka-11" class="anchor" href="#adore-djatoka-11" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adore Djatoka 1.1</h4>

<p>djatoka is open source Java software that builds upon a rich set of APIs and libraries to provide a service framework for the dynamic dissemination of JPEG 2000 image files. (<a href="http://sourceforge.net/projects/djatoka/">http://sourceforge.net/projects/djatoka/</a>)</p>

<h4>
<a id="mysql-5" class="anchor" href="#mysql-5" aria-hidden="true"><span class="octicon octicon-link"></span></a>MySQL 5</h4>

<p>" MySQL is a freely available open source Relational Database Management System (RDBMS) that uses Structured Query Language (SQL). SQL is the most popular language for adding, accessing and managing content in a database. It is most noted for its quick processing, proven reliability, ease and flexibility of use." (Google Search)</p>

<h4>
<a id="apache-2" class="anchor" href="#apache-2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Apache 2</h4>

<p>Apache is a freely available Web server that is distributed under an "open source" license. Version 2.0 runs on most UNIX-based operating systems (such as Linux, Solaris, Digital UNIX, and AIX), on other UNIX/POSIX-derived systems (such as Rhapsody, BeOS, and BS2000/OSD), on AmigaOS, and on Windows 2000. (Google Search)</p>

<h4>
<a id="saxon-95" class="anchor" href="#saxon-95" aria-hidden="true"><span class="octicon octicon-link"></span></a>Saxon 9.5</h4>

<p>The Saxon package is a collection of tools for processing XML documents. 
<a href="http://sourceforge.net/projects/saxon/">http://sourceforge.net/projects/saxon/</a></p>

<h3>
<a id="how-to-get-it" class="anchor" href="#how-to-get-it" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to Get it</h3>

<p>Just go to the "View on github" link and browse the README.md for more information on how to use it. </p>

<p>The installation process is fairly simple. </p>

<p>Requirements:</p>

<ul>
<li>CentOS 7 based machine (minimal install is sufficient). </li>
</ul>

<p>Notes: </p>

<ul>
<li>an /opt/fedora-repository directory will be created as the installation base.</li>
<li>generates the user accounts and creates strong random passwords for the accounts which is emailed to the admin at the end. </li>
</ul>

<h1>
<a id="installation-quick" class="anchor" href="#installation-quick" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation (quick):</h1>

<p>In order to simplify the installation process we created an init.d service that you can load on the machine to do the installation for you. </p>

<p>This automates the manual installation process that is shown further below.</p>

<pre><code>% cd /etc/init.d
% wget https://raw.githubusercontent.com/dhinitiative/fedora-repository/master/etc/repository-installer-init-d
</code></pre>

<p>modify the repository-installer-init-d script for your email address for root's mail and to notify you:</p>

<p>edit the line: </p>

<pre><code>sed -i "s|youremail@domain.com|&lt;REPLACE WITH YOUR EMAIL&gt;|g" /opt/fedora-repository/installer.sh
</code></pre>

<p>change the  to your real email address or the address where all mail for the box should go.
it should read something like this:</p>

<pre><code>sed -i "s|youremail@domain.com|dhiemail@dhinitiative.org|g" /opt/fedora-repository/installer.sh
</code></pre>

<p>Then run the following commands:</p>

<pre><code>% mv repository-installer-init-d repository-installer
% chmod 755 /etc/init.d/repository-installer
% chkconfig --add repository-installer
</code></pre>

<p>Now you have a repository-installer service on the machine.</p>

<pre><code>[root@host ~]# chkconfig --list | grep repository-installer

Note: This output shows SysV services only and does not include native
systemd services. SysV configuration data might be overridden by native
systemd configuration.

If you want to list systemd services use 'systemctl list-unit-files'.
To see services enabled on particular target use
'systemctl list-dependencies [target]'.

repository-installer    0:off   1:off   2:off   3:off   4:off   5:off   6:off
[root@host ~]# 
</code></pre>

<p>If it's off turn it on with ( chkconfig repository-installer on ) alternatively to turn it off ( chkconfig repository-installer off )</p>

<p>By enabling this service it will automatically build the fedora server the next reboot. So reboot your machine and sit back and wait up to an hour for the installation to complete. At the end of the process all the login details will be emailed to the root account specified in the instructions above. Also note that it WILL NOT build over an already installed server. If the installation detects /opt/feodra-repository it stops the install and disables the service so it won't keep running on reboots. </p>

<p>On a production server you should remove the installer service. </p>

<pre><code>% rm /etc/init.d/repository-installer



That's it!
</code></pre>

<p>You can also log back in after the reboot and do:</p>

<pre><code>% tail -f /opt/fedora-repository/installation.log 
</code></pre>

<p>You can watch the install process as it works along building the installation. </p>

<h1>
<a id="installation-manually" class="anchor" href="#installation-manually" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation (manually):</h1>

<pre><code>Install needed software:
    % yum -y install git gettext sendmail

Create the installation directory:

   % mkdir /opt
   % cd /opt

Get the installation software:

   % git clone https://github.com/dhinitiative/fedora-repository.git

Configure the installation:

  % cd /opt/fedora-repository

  edit the file installer.sh and modify the values to suit your environment, modify the following:

  export ADMIN_EMAIL='youremail@domain.com' 
  export FEDORA_USER_PASS='fedora2014'
  export ROOT_MYSQL_PASS='mysqlroot' 
  export FEDORA_DB_NAME="fedora3"                           # Name of fedora MySQL database -&gt; fedora3 is recommended
  export FEDORA_DB_USER="fedoradb"                      # Fedora db username -&gt; for fedora.fcfg file
  export FEDORA_DB_PASS='fedoradbpass'                  # Fedora db password -&gt; for fedora.fcfg file
  export FEDORA_ADMIN_USER="fedoraAdmin"                  # Username for http://localhost:8080/fedora/admin
  export FEDORA_ADMIN_PASS='fedoraadminpass'              # Password for http://localhost:8080/fedora/admin
  export FEDORA_GSEARCH_ADMIN_USER="fgsAdmin"             # Username for http://localhost:8080/fedoragsearch
  export FEDORA_GSEARCH_ADMIN_PASS='fgsadminpass'  



Execute the installation:
  % chmod 755 installer.sh
  % ./installer.sh &gt;/opt/fedora-repository/installation.log 2&gt;&amp;1 &amp;
</code></pre>

<p>Note: run the command:</p>

<pre><code>% tail -f /opt/fedora-repository/installation.log 
</code></pre>

<p>To watch the install process as it works along building the installation. </p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/dhinitiative/fedora-repository">Fedora-repository</a> is maintained by <a href="https://github.com/dhinitiative">dhinitiative</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
